; generated by ARM C/C++ Compiler, RVCT4.0 [Build 728]
; commandline ArmCC [--debug -c --asm --interleave -o..\OBJ\main.o --depend=..\OBJ\main.d --cpu=Cortex-M3 --apcs=interwork -O0 -I..\..\Libraries\STM32F10x_StdPeriph_Driver\inc -I..\..\Libraries\CMSIS\CM3\CoreSupport -I..\..\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x -I..\..\USER\INC -IC:\Keil\ARM\INC -IC:\Keil\ARM\INC\ST\STM32F10x -D__MICROLIB -DUSE_STDPERIPH_DRIVER -DSTM32F10X_HD --omf_browse=..\OBJ\main.crf ..\..\USER\SRC\main.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  CLK_generate PROC
;;;109    
;;;110     void CLK_generate(void)
000000  b500              PUSH     {lr}
;;;111    {
000002  b087              SUB      sp,sp,#0x1c
;;;112    	GPIO_InitTypeDef GPIO_InitStructure1;
;;;113     	RCC_ClocksTypeDef RCC_Clocks;   	
;;;114    	GPIO_InitStructure1.GPIO_Pin = GPIO_Pin_8;
000004  f44f7080          MOV      r0,#0x100
000008  f8ad0018          STRH     r0,[sp,#0x18]
;;;115    	GPIO_InitStructure1.GPIO_Mode = GPIO_Mode_AF_PP ; 
00000c  2018              MOVS     r0,#0x18
00000e  f88d001b          STRB     r0,[sp,#0x1b]
;;;116    	GPIO_InitStructure1.GPIO_Speed = GPIO_Speed_50MHz;
000012  2003              MOVS     r0,#3
000014  f88d001a          STRB     r0,[sp,#0x1a]
;;;117    	GPIO_Init(GPIOA, &GPIO_InitStructure1);  	
000018  a906              ADD      r1,sp,#0x18
00001a  4851              LDR      r0,|L1.352|
00001c  f7fffffe          BL       GPIO_Init
;;;118    	RCC_GetClocksFreq(&RCC_Clocks);  
000020  a801              ADD      r0,sp,#4
000022  f7fffffe          BL       RCC_GetClocksFreq
;;;119    	RCC_MCOConfig(RCC_MCO_HSE);   
000026  2006              MOVS     r0,#6
000028  f7fffffe          BL       RCC_MCOConfig
;;;120    
;;;121    }
00002c  b007              ADD      sp,sp,#0x1c
00002e  bd00              POP      {pc}
                          ENDP

                  RCC_Configuration PROC
;;;81     *******************************************************************************/
;;;82     void RCC_Configuration(void)
000030  b510              PUSH     {r4,lr}
;;;83     { 
;;;84     
;;;85       ErrorStatus HSEStartUpStatus;
;;;86       RCC_DeInit();
000032  f7fffffe          BL       RCC_DeInit
;;;87       RCC_HSEConfig(RCC_HSE_ON);   
000036  f44f3080          MOV      r0,#0x10000
00003a  f7fffffe          BL       RCC_HSEConfig
;;;88       HSEStartUpStatus = RCC_WaitForHSEStartUp();
00003e  f7fffffe          BL       RCC_WaitForHSEStartUp
000042  4604              MOV      r4,r0
;;;89     
;;;90       if(HSEStartUpStatus == SUCCESS)	  
000044  2c01              CMP      r4,#1
000046  d11e              BNE      |L1.134|
;;;91       {
;;;92       
;;;93         RCC_HCLKConfig(RCC_SYSCLK_Div1);  
000048  2000              MOVS     r0,#0
00004a  f7fffffe          BL       RCC_HCLKConfig
;;;94         RCC_PCLK2Config(RCC_HCLK_Div1);		   
00004e  2000              MOVS     r0,#0
000050  f7fffffe          BL       RCC_PCLK2Config
;;;95     	RCC_PCLK1Config(RCC_HCLK_Div2);	 	  
000054  02a0              LSLS     r0,r4,#10
000056  f7fffffe          BL       RCC_PCLK1Config
;;;96         RCC_PLLConfig(RCC_PLLSource_HSE_Div1, RCC_PLLMul_9);	
00005a  f44f11e0          MOV      r1,#0x1c0000
00005e  0420              LSLS     r0,r4,#16
000060  f7fffffe          BL       RCC_PLLConfig
;;;97         RCC_PLLCmd(ENABLE); 
000064  2001              MOVS     r0,#1
000066  f7fffffe          BL       RCC_PLLCmd
;;;98         while(RCC_GetFlagStatus(RCC_FLAG_PLLRDY) == RESET)	  
00006a  bf00              NOP      
                  |L1.108|
00006c  2039              MOVS     r0,#0x39
00006e  f7fffffe          BL       RCC_GetFlagStatus
000072  2800              CMP      r0,#0
000074  d0fa              BEQ      |L1.108|
;;;99            {
;;;100           }
;;;101        RCC_SYSCLKConfig(RCC_SYSCLKSource_PLLCLK); 
000076  2002              MOVS     r0,#2
000078  f7fffffe          BL       RCC_SYSCLKConfig
;;;102        while(RCC_GetSYSCLKSource() != 0x08)	  
00007c  bf00              NOP      
                  |L1.126|
00007e  f7fffffe          BL       RCC_GetSYSCLKSource
000082  2808              CMP      r0,#8
000084  d1fb              BNE      |L1.126|
                  |L1.134|
;;;103           { 
;;;104           }
;;;105         }
;;;106    
;;;107        RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA|RCC_APB2Periph_AFIO, ENABLE); 
000086  2101              MOVS     r1,#1
000088  2005              MOVS     r0,#5
00008a  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;108    }
00008e  bd10              POP      {r4,pc}
;;;109    
                          ENDP

                  main PROC
;;;39     
;;;40     main()
000090  b51c              PUSH     {r2-r4,lr}
;;;41     { 
;;;42     	RCC_Configuration();//系统时钟设置
000092  f7fffffe          BL       RCC_Configuration
;;;43     	delay_init(72);		//延时初始化
000096  2048              MOVS     r0,#0x48
000098  f7fffffe          BL       delay_init
;;;44     	USART1_Init(115200);//串口1初始化 
00009c  f44f30e1          MOV      r0,#0x1c200
0000a0  f7fffffe          BL       USART1_Init
;;;45     	CLK_generate(); 
0000a4  f7fffffe          BL       CLK_generate
;;;46      	printf("QF: You are welcom!\r\n");	
0000a8  a02e              ADR      r0,|L1.356|
0000aa  f7fffffe          BL       __2printf
;;;47     
;;;48     	GpioInit(GPIOA, GPIO_Pin_11, GPIO_Mode_Out_PP, GPIO_Speed_50MHz);	//CMOS_CS
0000ae  2303              MOVS     r3,#3
0000b0  2210              MOVS     r2,#0x10
0000b2  01d1              LSLS     r1,r2,#7
0000b4  482a              LDR      r0,|L1.352|
0000b6  f7fffffe          BL       GpioInit
;;;49     	GpioInit(GPIOC, GPIO_Pin_13, GPIO_Mode_Out_PP, GPIO_Speed_50MHz);   	//WriteControl
0000ba  2303              MOVS     r3,#3
0000bc  2210              MOVS     r2,#0x10
0000be  0251              LSLS     r1,r2,#9
0000c0  482e              LDR      r0,|L1.380|
0000c2  f7fffffe          BL       GpioInit
;;;50     
;;;51     	GpioInit(GPIOC, GPIO_Pin_14, GPIO_Mode_Out_PP, GPIO_Speed_50MHz);   //CMOS2 PWDN
0000c6  2303              MOVS     r3,#3
0000c8  2210              MOVS     r2,#0x10
0000ca  0291              LSLS     r1,r2,#10
0000cc  482b              LDR      r0,|L1.380|
0000ce  f7fffffe          BL       GpioInit
;;;52     	GpioInit(GPIOC, GPIO_Pin_15, GPIO_Mode_Out_PP, GPIO_Speed_50MHz);	//CMOS2 RST
0000d2  2303              MOVS     r3,#3
0000d4  2210              MOVS     r2,#0x10
0000d6  02d1              LSLS     r1,r2,#11
0000d8  4828              LDR      r0,|L1.380|
0000da  f7fffffe          BL       GpioInit
;;;53     	Cmos_CS=1;
0000de  2001              MOVS     r0,#1
0000e0  4927              LDR      r1,|L1.384|
0000e2  6008              STR      r0,[r1,#0]
;;;54     	WriteControl=1;
0000e4  4927              LDR      r1,|L1.388|
0000e6  f8c101b4          STR      r0,[r1,#0x1b4]
;;;55     	LCD_Init();				  
0000ea  f7fffffe          BL       LCD_Init
;;;56     	LCD_Clear(BLUE);       //清屏 
0000ee  201f              MOVS     r0,#0x1f
0000f0  f7fffffe          BL       LCD_Clear
;;;57     	POINT_COLOR=YELLOW;
0000f4  f64f70e0          MOV      r0,#0xffe0
0000f8  4923              LDR      r1,|L1.392|
0000fa  8008              STRH     r0,[r1,#0]
;;;58     	BACK_COLOR=BLUE;
0000fc  201f              MOVS     r0,#0x1f
0000fe  4923              LDR      r1,|L1.396|
000100  8008              STRH     r0,[r1,#0]
;;;59        	LCD_ShowString(20,50,"QF Welcom");
000102  a223              ADR      r2,|L1.400|
000104  2132              MOVS     r1,#0x32
000106  2014              MOVS     r0,#0x14
000108  f7fffffe          BL       LCD_ShowString
;;;60     	LCD_ShowString(20,100,"STM32 Camera");
00010c  a223              ADR      r2,|L1.412|
00010e  2164              MOVS     r1,#0x64
000110  2014              MOVS     r0,#0x14
000112  f7fffffe          BL       LCD_ShowString
;;;61     	LCD_ShowString(20,150,"OV7725 Initing......");
000116  a225              ADR      r2,|L1.428|
000118  2196              MOVS     r1,#0x96
00011a  2014              MOVS     r0,#0x14
00011c  f7fffffe          BL       LCD_ShowString
;;;62     	CMOS2_PWDN=0;
000120  2000              MOVS     r0,#0
000122  4928              LDR      r1,|L1.452|
000124  6008              STR      r0,[r1,#0]
;;;63     	CMOS2_RST=0;
000126  4917              LDR      r1,|L1.388|
000128  f8c101bc          STR      r0,[r1,#0x1bc]
;;;64     	delay_ms(20);
00012c  f04f0014          MOV      r0,#0x14
000130  f7fffffe          BL       delay_ms
;;;65     	CMOS2_RST=1;
000134  2001              MOVS     r0,#1
000136  4924              LDR      r1,|L1.456|
000138  6008              STR      r0,[r1,#0]
;;;66     	InitI2C0();
00013a  f7fffffe          BL       InitI2C0
;;;67     	while(1!=Cmos7725_init());   //CMOS初始化	
00013e  bf00              NOP      
                  |L1.320|
000140  f7fffffe          BL       Cmos7725_init
000144  2801              CMP      r0,#1
000146  d1fb              BNE      |L1.320|
;;;68     	Exit_Init(GPIOC, GPIO_Pin_4, GPIO_Mode_IPU, EXTI_Trigger_Falling, 2, 5);	//VSYNC	
000148  2305              MOVS     r3,#5
00014a  2202              MOVS     r2,#2
00014c  e9cd2300          STRD     r2,r3,[sp,#0]
000150  230c              MOVS     r3,#0xc
000152  2248              MOVS     r2,#0x48
000154  2110              MOVS     r1,#0x10
000156  4809              LDR      r0,|L1.380|
000158  f7fffffe          BL       Exit_Init
;;;69       	while(1) 
00015c  bf00              NOP      
                  |L1.350|
00015e  e7fe              B        |L1.350|
;;;70     	{		  		
;;;71     
;;;72     	}
;;;73     }
;;;74     
                          ENDP

                  |L1.352|
                          DCD      0x40010800
                  |L1.356|
000164  51463a20          DCB      "QF: You are welcom!\r\n",0
000168  596f7520
00016c  61726520
000170  77656c63
000174  6f6d210d
000178  0a00    
00017a  00                DCB      0
00017b  00                DCB      0
                  |L1.380|
                          DCD      0x40011000
                  |L1.384|
                          DCD      0x422101ac
                  |L1.388|
                          DCD      0x42220000
                  |L1.392|
                          DCD      POINT_COLOR
                  |L1.396|
                          DCD      BACK_COLOR
                  |L1.400|
000190  51462057          DCB      "QF Welcom",0
000194  656c636f
000198  6d00    
00019a  00                DCB      0
00019b  00                DCB      0
                  |L1.412|
00019c  53544d33          DCB      "STM32 Camera",0
0001a0  32204361
0001a4  6d657261
0001a8  00      
0001a9  00                DCB      0
0001aa  00                DCB      0
0001ab  00                DCB      0
                  |L1.428|
0001ac  4f563737          DCB      "OV7725 Initing......",0
0001b0  32352049
0001b4  6e697469
0001b8  6e672e2e
0001bc  2e2e2e2e
0001c0  00      
0001c1  00                DCB      0
0001c2  00                DCB      0
0001c3  00                DCB      0
                  |L1.452|
                          DCD      0x422201b8
                  |L1.456|
                          DCD      0x422201bc

                  __ARM_use_no_argv EQU 0
